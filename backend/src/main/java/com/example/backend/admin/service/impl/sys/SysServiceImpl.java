package com.example.backend.admin.service.impl.sys;import com.example.backend.admin.auth.hash.MD5HashServiceImpl;import com.example.backend.admin.auth.jwt.JWTAuthenticalServiceImpl;import com.example.backend.admin.dao.ISysUserDao;import com.example.backend.admin.service.ISysService;import com.example.common.base.Cred;import com.example.common.base.GTException;import com.example.common.domain.sys.SysUser;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import java.util.List;@Service@Transactionalpublic class SysServiceImpl implements ISysService {    @Autowired    private ISysUserDao sysUserDao;    @Autowired    private MD5HashServiceImpl md5HashService;    @Autowired    private JWTAuthenticalServiceImpl jwtAuthenticalService;    @Override    public List<SysUser> sysUserGetList(Cred cred, SysUser user) throws Exception {        return sysUserDao.getlist(cred, user);    }    @Transactional(rollbackFor = { Exception.class })    @Override    public void sysUserInser(Cred cred, SysUser user) throws Exception {        sysUserDao.insert(cred, user);    }    @Transactional(rollbackFor = { Exception.class })    @Override    public String sysUserLogin(Cred cred, SysUser user) throws Exception {        SysUser sysUser = sysUserDao.getByUserID(cred, user.getSysUserId());        if (sysUser.getSysUserId().isEmpty()) {            throw new GTException("Tài khoản không đúng", null, null);        }        String md5Pass = md5HashService.hashMD5(user.getPassword());        if (sysUser.getPassword().compareTo(md5Pass) != 0) {            throw new GTException("Mật khẩu không đúng", null, null);        }        return jwtAuthenticalService.generateToken(cred);    }    @Transactional(rollbackFor = { Exception.class })    @Override    public void sysUserDelete(Cred cred, SysUser user) throws Exception {        sysUserDao.delete(cred, user);    }}